---
title: 'Execute SQL Query'
openapi: 'POST /api/query'
---

Run ad-hoc or saved SQL statements against the ClickHouse warehouse. This endpoint powers the in-product SQL editor and programmatic integrations.

<Info>
Requests are rate limited to <strong>30 executions per minute</strong> per authenticated user or API key.
</Info>

### Request fields

<ParamField body="query" type="string">
  Raw SQL to execute. Mutually exclusive with <code>query_id</code>.
</ParamField>

<ParamField body="query_id" type="string">
  Execute a saved query stored in Supabase. Ignored when <code>query</code> is supplied.
</ParamField>

<ParamField body="limit" type="integer" default="None">
  Optional row limit override. Useful when running saved queries with large defaults.
</ParamField>

### Saved query execution

When you provide <code>query_id</code>, the service fetches the latest SQL from Supabase before execution. Use this flow to keep complex statements version-controlled while reusing the same API call.

### Response structure

- <code>result.columns</code> lists column names in order
- <code>result.data</code> contains an array of rows (each row is an ordered array)
- <code>result.execution_time_ms</code> reports end-to-end latency
- <code>query</code> echoes the executed SQL after namespace rewriting

<Tip>
Track execution analytics with <a href="/api-reference/endpoint/query-stats">GET /api/query/{query_id}/stats</a> or list all saved query metrics via <a href="/api-reference/endpoint/query-stats">GET /api/queries/stats</a>.
</Tip>

### Example Response

```json
{
  "success": true,
  "result": {
    "columns": ["title", "yes_probability", "volume_24hr"],
    "data": [
      ["Will Bitcoin hit $100k in 2025?", 0.67, 284567.23],
      ["AI regulation passes before 2026", 0.52, 156234.89],
      ["Trump wins 2024 election", 0.48, 1245678.90]
    ],
    "row_count": 3,
    "execution_time_ms": 89,
    "statistics": {
      "elapsed": 0.086,
      "rows_read": 56519
    }
  },
  "query": "SELECT title, yes_probability, volume_24hr FROM polymarket_events ORDER BY volume_24hr DESC LIMIT 3"
}
```

### Validate before running

Use <a href="/api-reference/endpoint/query-validate">POST /api/query/validate</a> to confirm syntax and inspect ClickHouse <code>EXPLAIN</code> output without incurring compute.
